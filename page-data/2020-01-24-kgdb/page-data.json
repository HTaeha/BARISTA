{"componentChunkName":"component---src-templates-post-tsx","path":"/2020-01-24-kgdb/","webpackCompilationHash":"126557aa788b08be5e5c","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB6klEQVQ4y52Vuy9DcRTH7+0trUdLLCQMrKIzQcQjnfwHVoPEQMLssYhFDMQuqMai1Q5IhJjZWWyiHoP3QnKv79FzrtOruVf8kk9+t79zzvd3fq9Tw0BzHIcIgQrD02iMbLZtW+gJk8ct7k3ygd0NIKEaEANxsAR2QRpOSfaJsw8FJ8Ee2AGrPB4FYRGsBdWUJf/uAx9OsT2CLk9GFibacH7atlqNKR+doE4Z2sENBzyDbh6vVD4LSpRWVKX3aRqcyn5y3wEKHPACeng8wv24ErxC1m06wzE2ZANEe3l8SoldgkbZ6+9AqI8qh5xXFHYRvQYryvcCNMnh6iXTCaf9RMGdU9rOMVEz28Pa391s9FsBovfKPsLjUV5liWBMNhQGv0wT4EGuFHyHOOZXhhH9SgKWn1CZvkGsXy9bnFooQ/f5FGdNiSK+8/w89fJv2fwOBkpE8TEJlvWL4O+UyjRfZk+16KDOUC7pjJ8oMs35iL6CYTFMqExm/yEqV+pTBhto872idHpyYbm6BN5TqYV0yhScUUFzZWrjWsDpFwzvTedaJ22dsgWLyHaeevCkyltGTwifVj1DSIlmnb+3YyqyhkdZRC0u+fVgE5yAfXAIDrg/UtDYGeKp/EXRxw2VleGtGu5TCmgcT38T5hdMUxc6xWwpjQAAAABJRU5ErkJggg==","width":400,"height":414,"src":"/static/cbfd19b86b52612908ae88881f48d777/647de/JY-white-logo.png","srcSet":"/static/cbfd19b86b52612908ae88881f48d777/647de/JY-white-logo.png 1x,\n/static/cbfd19b86b52612908ae88881f48d777/59139/JY-white-logo.png 1.5x,\n/static/cbfd19b86b52612908ae88881f48d777/af144/JY-white-logo.png 2x"}}},"markdownRemark":{"html":"<p>모두 다 쓰고 싶어하지만 쓰는 사람은 별로없는 gdb, 그 중에서도 kgdb를 사용하기 위해서 무슨 설정을 해주어야 되는지 알아보자.</p>\n<hr>\n<p>kgdb는 커널디버깅을 하기 위해서 사용한다. 보통 임베디드 시스템에서 타겟 커널을 디버깅하기 위해서 사용하는 것 같은데, 내 경우에는 커널 모듈을 디버깅하기 위해서 VM으로 ubuntu를 가동하고 이 ubuntu의 커널을 디버깅하기 위해서 사용한다.</p>\n<p>즉 요약하면, 이 글의 목적은 Ubuntu 서버(Host)에서 VM으로 Ubuntu(Guest)를 가동시키고 Guest의 커널을 Host에서 디버깅하는 것이다.</p>\n<hr>\n<p>3개의 terminal을 띄워 두고 시작한다.</p>\n<p>첫번째 창은 Host로 가상머신을 구동하는 역할을 한다. <em>Host</em>\n두번째 창은 gdb를 구동시키는 창이다. <em>gdb</em>\n세번째 창은 guest의 터미널이다. <em>Guest</em></p>\n<hr>\n<h1>Host</h1>\n<h2>Create ubuntu image</h2>\n<p>ubuntu image를 만들어야 한다.\nvirt-manager를 사용한다면 .qcow2 파일이 이에 해당한다. (기본 위치는 /var/lib/libvirt/images/ 밑)</p>\n<p>virt-manager로 VM을 구동시키는 법은 <a href=\"https://siisee11.github.io/2019-12-29-ubuntu-on-ubuntu/\">여기</a>에서 확인 할 수 있다.</p>\n<h2>Write shell command</h2>\n<p>qemu 커맨드로 가상 VM 켜는 것은 아래의 쉘스크립트를 작성해서 실행하면 된다.</p>\n<p>(tcp 포트로 5555를 사용함을 유의)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#!/bin/bash\n\nqemu-system-x86_64 \\\n        --enable-kvm --nographic \\\n        -smp 1 -m 2g \\\n        -drive file=/var/lib/libvirt/images/ubuntu18.04-spark.qcow2,format=qcow2 \\\n        -net nic -net user,hostfwd=tcp::5555-:22 \\\n        -serial pty </code></pre></div>\n<p>실행하면 <code class=\"language-text\">qemu-system-x86_64: -serial pty: char device redirected to /dev/pts/4 (label serial0)</code> 이 뜨는데, 이 디바이스 이름을 기억해 놓자 (/dev/pts/4)</p>\n<hr>\n<h1>Guest</h1>\n<h2>ssh to VM</h2>\n<p>qemu로 VM을 구동 시켰으니 VM에 접속해야한다.</p>\n<p>guest의 터미널의 접속하는 방법은 ssh를 이용하는 것이다.</p>\n<p>qemu를 실행할 때, port번호 5555번을 guest의 22번 포트로 터널을 뚫어 주었기 때문에 localhost의 5555번 포트로 접속가능하다. (<em>-net user,hostfwd=tcp::5555-:22</em>)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ssh localhost -p5555</code></pre></div>\n<h2>Grub setting</h2>\n<p>kgdb를 사용하기 위해서 Grub의 커맨드라인을 설정해주어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo vim /etc/default/grub\nGRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet splash kgdboc=ttyS0,115200 nokaslr&quot;</code></pre></div>\n<p><em>위의 커맨드라인에서 nokaslr 옵션은 커널소스코드 주소의 베이스가 동적으로 변하는 것을 막아줘서 디버그 심볼과 매칭이되게 해준다.</em>\n변경사항을 저장하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo update-grub</code></pre></div>\n<p>Guest에서 gdb에게 컨트롤을 넘겨주는 방법은 아래 커맨드를 입력하는 것으로 가능하다.\n위의 두 줄은 한번만 설정해주면 되고, 세번째 줄이 sysrq 시스템콜을 날려서 gdb로 컨트롤을 넘겨주는 커맨드이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo bash -c &quot;echo ttyS0,115200 &gt; /sys/module/kgdboc/parameters/kgdboc&quot;\nsudo bash -c &quot;echo 1 &gt; /proc/sys/kernel/sysrq&quot;\nsudo bash -c &quot;echo g &gt; /proc/sysrq-trigger&quot;</code></pre></div>\n<p>위의 트리거를 발생시키면 host의 gdb로 컨트롤이 넘어가게된다. </p>\n<hr>\n<h1>gdb (Host)</h1>\n<h2>Download image</h2>\n<p>guest에 설치된 버전의 vmlinux를 다운로드해야 한다.\nvmlinux란 소스파일이 컴파일되어 나온 커널 전체의 실행파일로 생각할 수 있다.\n<code class=\"language-text\">(Guest)$ uname -r</code>로 guest에 설치된 버전을 확인할 수 있다.</p>\n<p><code class=\"language-text\">apt search 5.3.0-26-generic</code> 로 이미지를 찾아서 다운로드한다.</p>\n<p><code class=\"language-text\">/usr/lib/debug/boot/</code> 에 vmlinux-5.3.0-26-generic가 있을 것이다.\n해당 디렉토리로 이동하여 <code class=\"language-text\">sudo gdb vmlinux-5.3.0-26-generic</code>로 gdb를 실행한다.</p>\n<p>gdb의 타겟은 qemu에서 redirect한 character device인 /dev/pts/4 이므로 아래 커맨드로 설정해준다.\n이 커맨드 전에 <em>Guest</em>에서 트리거를 발생시켜줘야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(gdb) target remote /dev/pts/4</code></pre></div>\n<h2>Problems</h2>\n<p>위의 커맨드까지 입력하면 아래의 문제점들을 확인 할 수 있다.</p>\n<ol>\n<li><code class=\"language-text\">0xffffffffa0f77604 in ?? ()</code> </li>\n</ol>\n<p>해당 주소값에 대한 debugsymbol을 못찾아서 저렇게 뜨는것이다.\n해당 커널의 디버그 심벌을 받으면 된다.</p>\n<ol start=\"2\">\n<li><code class=\"language-text\">/build/linux-hwe-3HpQOB/linux-hwe-5.3.0/init/main.c: No such file or directory.</code> </li>\n</ol>\n<p>해당 커널에 대한 소스코드가 없어서 현재 수행되는 부분의 소스코드를 보여줄 수 없다는 것이다.</p>\n<p>위 두 문제에 대한 해결 방법은 해당 커널의 debugsymbol과 소스코드를 다운로드 받는 것이다.\n소스코드는 다음과 같이 다운로드 받는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">apt source linux-image-unsigned-5.3.0-26-generic  #source code</code></pre></div>\n<p>디버그 심볼을 다운로드 받기위해서 저장소 업데이트를 해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(host)$ echo &quot;deb http://ddebs.ubuntu.com $(lsb_release -cs) main restricted universe multiverse\ndeb http://ddebs.ubuntu.com $(lsb_release -cs)-updates main restricted universe multiverse\ndeb http://ddebs.ubuntu.com $(lsb_release -cs)-proposed main restricted universe multiverse&quot; | \\\n(host)$sudo tee -a /etc/apt/sources.list.d/ddebs.list\n(host)$sudo apt install ubuntu-dbgsym-keyring\n(host)$sudo apt-get update\n(host)$sudo apt install linux-image-5.3.0-26-generic-dbgsym \n(host)$dpkg -L linux-image-5.3.0-26-generic-dbgsym</code></pre></div>\n<p><a href=\"https://wiki.ubuntu.com/Debug%20Symbol%20Packages#Getting_-dbgsym.ddeb_packages\">Getting dbgsym.ddeb_packages</a>에 더 자세히 나와있다.</p>\n<p>gdb를 다시 실행해서 substitute-path를 이용해 소스코드 경로를 수정해준다. 앞의 경로가 나오면 뒤의 경로로 바꿔버리겠다는 뜻이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(gdb) set substitute-path /build/linux-hwe-3HpQOB/linux-hwe-5.3.0 /home/siisee11/linux-kernel/linux-hwe-5.3.0\n(gdb) target remote /dev/pts/4</code></pre></div>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"모두 다 쓰고 싶어하지만 쓰는 사람은 별로없는 gdb, 그 중에서도 kgdb를 사용하기 위해서 무슨 설정을 해주어야 되는지 알아보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"kgdb는 커널디버깅을 하기 위해서 사용한다. 보통 임베디드 시스템에서 타겟 커널을 디버깅하기 위해서 사용하는 것 같은데, 내 경우에는 커널 모듈을 디버깅하기 위해서 VM으로 ubuntu를 가동하고 이 ubuntu의 커널을 디버깅하기 위해서 사용한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"즉 요약하면, 이 글의 목적은 Ubuntu 서버(Host)에서 VM으로 Ubuntu(Guest)를 가동시키고 Guest의 커널을 Host에서 디버깅하는 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"3개의 terminal을 띄워 두고 시작한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"첫번째 창은 Host로 가상머신을 구동하는 역할을 한다. "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Host"}]},{"type":"text","value":"\n두번째 창은 gdb를 구동시키는 창이다. "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"gdb"}]},{"type":"text","value":"\n세번째 창은 guest의 터미널이다. "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Guest"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Host"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Create ubuntu image"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ubuntu image를 만들어야 한다.\nvirt-manager를 사용한다면 .qcow2 파일이 이에 해당한다. (기본 위치는 /var/lib/libvirt/images/ 밑)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"virt-manager로 VM을 구동시키는 법은 "},{"type":"element","tagName":"a","properties":{"href":"https://siisee11.github.io/2019-12-29-ubuntu-on-ubuntu/"},"children":[{"type":"text","value":"여기"}]},{"type":"text","value":"에서 확인 할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Write shell command"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"qemu 커맨드로 가상 VM 켜는 것은 아래의 쉘스크립트를 작성해서 실행하면 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"(tcp 포트로 5555를 사용함을 유의)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#!/bin/bash\n\nqemu-system-x86_64 \\\n        --enable-kvm --nographic \\\n        -smp 1 -m 2g \\\n        -drive file=/var/lib/libvirt/images/ubuntu18.04-spark.qcow2,format=qcow2 \\\n        -net nic -net user,hostfwd=tcp::5555-:22 \\\n        -serial pty "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"실행하면 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"qemu-system-x86_64: -serial pty: char device redirected to /dev/pts/4 (label serial0)"}]},{"type":"text","value":" 이 뜨는데, 이 디바이스 이름을 기억해 놓자 (/dev/pts/4)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Guest"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"ssh to VM"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"qemu로 VM을 구동 시켰으니 VM에 접속해야한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"guest의 터미널의 접속하는 방법은 ssh를 이용하는 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"qemu를 실행할 때, port번호 5555번을 guest의 22번 포트로 터널을 뚫어 주었기 때문에 localhost의 5555번 포트로 접속가능하다. ("},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"-net user,hostfwd=tcp::5555-:22"}]},{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ssh localhost -p5555"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Grub setting"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"kgdb를 사용하기 위해서 Grub의 커맨드라인을 설정해주어야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"sudo vim /etc/default/grub\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash kgdboc=ttyS0,115200 nokaslr\""}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"위의 커맨드라인에서 nokaslr 옵션은 커널소스코드 주소의 베이스가 동적으로 변하는 것을 막아줘서 디버그 심볼과 매칭이되게 해준다."}]},{"type":"text","value":"\n변경사항을 저장하자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"sudo update-grub"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Guest에서 gdb에게 컨트롤을 넘겨주는 방법은 아래 커맨드를 입력하는 것으로 가능하다.\n위의 두 줄은 한번만 설정해주면 되고, 세번째 줄이 sysrq 시스템콜을 날려서 gdb로 컨트롤을 넘겨주는 커맨드이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"sudo bash -c \"echo ttyS0,115200 > /sys/module/kgdboc/parameters/kgdboc\"\nsudo bash -c \"echo 1 > /proc/sys/kernel/sysrq\"\nsudo bash -c \"echo g > /proc/sysrq-trigger\""}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위의 트리거를 발생시키면 host의 gdb로 컨트롤이 넘어가게된다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"gdb (Host)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Download image"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"guest에 설치된 버전의 vmlinux를 다운로드해야 한다.\nvmlinux란 소스파일이 컴파일되어 나온 커널 전체의 실행파일로 생각할 수 있다.\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"(Guest)$ uname -r"}]},{"type":"text","value":"로 guest에 설치된 버전을 확인할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"apt search 5.3.0-26-generic"}]},{"type":"text","value":" 로 이미지를 찾아서 다운로드한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/usr/lib/debug/boot/"}]},{"type":"text","value":" 에 vmlinux-5.3.0-26-generic가 있을 것이다.\n해당 디렉토리로 이동하여 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"sudo gdb vmlinux-5.3.0-26-generic"}]},{"type":"text","value":"로 gdb를 실행한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"gdb의 타겟은 qemu에서 redirect한 character device인 /dev/pts/4 이므로 아래 커맨드로 설정해준다.\n이 커맨드 전에 "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Guest"}]},{"type":"text","value":"에서 트리거를 발생시켜줘야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"(gdb) target remote /dev/pts/4"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Problems"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위의 커맨드까지 입력하면 아래의 문제점들을 확인 할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"0xffffffffa0f77604 in ?? ()"}]},{"type":"text","value":" "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"해당 주소값에 대한 debugsymbol을 못찾아서 저렇게 뜨는것이다.\n해당 커널의 디버그 심벌을 받으면 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{"start":2},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/build/linux-hwe-3HpQOB/linux-hwe-5.3.0/init/main.c: No such file or directory."}]},{"type":"text","value":" "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"해당 커널에 대한 소스코드가 없어서 현재 수행되는 부분의 소스코드를 보여줄 수 없다는 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 두 문제에 대한 해결 방법은 해당 커널의 debugsymbol과 소스코드를 다운로드 받는 것이다.\n소스코드는 다음과 같이 다운로드 받는다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"apt source linux-image-unsigned-5.3.0-26-generic  #source code"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"디버그 심볼을 다운로드 받기위해서 저장소 업데이트를 해준다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"(host)$ echo \"deb http://ddebs.ubuntu.com $(lsb_release -cs) main restricted universe multiverse\ndeb http://ddebs.ubuntu.com $(lsb_release -cs)-updates main restricted universe multiverse\ndeb http://ddebs.ubuntu.com $(lsb_release -cs)-proposed main restricted universe multiverse\" | \\\n(host)$sudo tee -a /etc/apt/sources.list.d/ddebs.list\n(host)$sudo apt install ubuntu-dbgsym-keyring\n(host)$sudo apt-get update\n(host)$sudo apt install linux-image-5.3.0-26-generic-dbgsym \n(host)$dpkg -L linux-image-5.3.0-26-generic-dbgsym"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://wiki.ubuntu.com/Debug%20Symbol%20Packages#Getting_-dbgsym.ddeb_packages"},"children":[{"type":"text","value":"Getting dbgsym.ddeb_packages"}]},{"type":"text","value":"에 더 자세히 나와있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"gdb를 다시 실행해서 substitute-path를 이용해 소스코드 경로를 수정해준다. 앞의 경로가 나오면 뒤의 경로로 바꿔버리겠다는 뜻이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"(gdb) set substitute-path /build/linux-hwe-3HpQOB/linux-hwe-5.3.0 /home/siisee11/linux-kernel/linux-hwe-5.3.0\n(gdb) target remote /dev/pts/4"}]}]}]}],"data":{"quirksMode":false}},"excerpt":"모두 다 쓰고 싶어하지만 쓰는 사람은 별로없는 gdb, 그 중에서도 kgdb를 사용하기 위해서 무슨 설정을 해주어야 되는지 알아보자. kgdb…","timeToRead":3,"frontmatter":{"title":"Ubuntu18.04 KGDB로 디버깅하는 환경 구성","userDate":"24 January 2020","date":"2020-01-24T10:03:47.149Z","tags":["Tools"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABHElEQVQoz61STUvDQBDtL87Bk0exBhJyzFUP9uyhSVEJ+Bf0EGh6kSZQzAeENmnU0rr7xm2STRPbikgfDLwZdt/OzpseSQCEmki0s5rTsZpEj/ZO8uaEoFWF8zLaXMRPYewEpVbN+WqNTf7ZffoXtK5WgvIhUQXNn7G+PsPH3Q1WIp8FAWzbRpqmyLIMYRjC8zw4joOiKJDn+X6H4KwqTp5AL+dgixA0GuDx4R6X/T4URYGqqtB1HYZhQNM0mKZZhmVZ5V3GGLodbsnmHex1iLerCyyHt0gWS0zGY/i+j0B06rouoihCHMdNniTJ8RmW8+NEX9EUxGb/nyF1nOJyi8QoeNvVg3HY5a0hnb3jzfpUbv252d2XT4WTC34D8DZQdDDYtP0AAAAASUVORK5CYII=","aspectRatio":1.7777777777777777,"src":"/static/2a2ef45fb4a0ecca42a239be3d20001d/ec873/ubuntu-logo.png","srcSet":"/static/2a2ef45fb4a0ecca42a239be3d20001d/4c9af/ubuntu-logo.png 930w,\n/static/2a2ef45fb4a0ecca42a239be3d20001d/e914e/ubuntu-logo.png 1860w,\n/static/2a2ef45fb4a0ecca42a239be3d20001d/ec873/ubuntu-logo.png 1920w","sizes":"(max-width: 1920px) 100vw, 1920px"}}},"author":{"id":"Jaeyoun","bio":"The maintainer","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB4klEQVQ4y6WUu64BURSGBw2FiChcCxKER/AGnkCpcBKJRqNQeggNQqVwl0hUNIjQuDUkxCUeQIW4Huf8rGSMmaGxip291l7f3mv9s/cwf18Yw/N/H3a73T5E3sKsiWaLw0g9HA6n06nT6cRisW63i8hutzufz+12OxqNNhoNpMEVgRHdbDaYjMdji8XCMEy5XKal0WhkMBgQKZVK1MULTH6tVmu1Wpgsl0u73c7lEYerUCgGgwGXv8OXywVjMplUq9W0vFgsbDYbgEqlcjwe3W435uFwGK1xK7/D1+sVY7PZRIbJZEKdcGezmdlsVqlULpcL8VAoJFSR4Wqbz+clEolWq+33+1S/0+kE6fF46AxxGLbf7zEWCgVk63Q6qh886pfJZNiXrVEE3m631A/ywENhtn+r1YqIkH+qXSwW0+k0RbPZLPHD4RDufD4n/VAXX23aLB6Pcz9PJpOBazQaWZ7Or1arLP88eTqd0jLL41ZAP71eT/qvViuNRuP3+9nzXtRer9cOhwN8LpfDJ0UklUrBBU/993q9RCLB5j8Fo83A0+eRSqUY5XI5TZRKZb1eFxGMx08mE5/P9/MwTAKBQDAY9Hq9kUgE95+u46f3/O4N4qryH4bwJSPjKjDhpsw3v6F/G2DG6DAJ3zQAAAAASUVORK5CYII=","width":400,"height":400,"src":"/static/345ae62c3650ceca4088b84d922b3bf4/4e842/JY-bold-big.png","srcSet":"/static/345ae62c3650ceca4088b84d922b3bf4/4e842/JY-bold-big.png 1x,\n/static/345ae62c3650ceca4088b84d922b3bf4/fca9c/JY-bold-big.png 1.5x,\n/static/345ae62c3650ceca4088b84d922b3bf4/94286/JY-bold-big.png 2x"}}]}}}},"relatedPosts":{"totalCount":2,"edges":[{"node":{"id":"9c381227-d2ea-55da-b793-ffc053779c7e","timeToRead":3,"excerpt":"모두 다 쓰고 싶어하지만 쓰는 사람은 별로없는 gdb, 그 중에서도 kgdb를 사용하기 위해서 무슨 설정을 해주어야 되는지 알아보자. kgdb…","frontmatter":{"title":"Ubuntu18.04 KGDB로 디버깅하는 환경 구성"},"fields":{"slug":"/2020-01-24-kgdb/"}}},{"node":{"id":"b277ace3-b00b-5955-bf44-5243a1ea8ae8","timeToRead":2,"excerpt":"항상 사용하는 vim commands VIM은 오랫동안 존재해온 Text editor이다. 특이한 걸 좋아해서 쓰기 시작했다가 너무 마음에 들어서 계속 쓰고있다.\n오랫동안 쓰이고 현재 많은 IDE에서 VIM을 제공하는 것만 봐도 VIM…","frontmatter":{"title":"내가 자주 사용하는 VIM 커맨드"},"fields":{"slug":"/2020-01-21-My-Vim-command/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2020-01-24-kgdb/","prev":{"excerpt":"항상 사용하는 vim commands VIM은 오랫동안 존재해온 Text editor이다. 특이한 걸 좋아해서 쓰기 시작했다가 너무 마음에 들어서 계속 쓰고있다.\n오랫동안 쓰이고 현재 많은 IDE에서 VIM을 제공하는 것만 봐도 VIM…","timeToRead":2,"frontmatter":{"title":"내가 자주 사용하는 VIM 커맨드","tags":["Tools"],"date":"2020-01-21T10:03:47.149Z","draft":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.7813765182186234,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAED/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQP/2gAMAwEAAhADEAAAAdqkoUB//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEgMf/aAAgBAQABBQIex//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABgQAQADAQAAAAAAAAAAAAAAAAEAEBEh/9oACAEBAAE/IZgQO9vK/9oADAMBAAIAAwAAABDQD//EABYRAQEBAAAAAAAAAAAAAAAAAAEREP/aAAgBAwEBPxASTP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAgEBPxAcn//EABwQAQACAQUAAAAAAAAAAAAAAAEQIXEAMUFhwf/aAAgBAQABPxB90Ka1Y0HB3mQGwGI//9k=","sizes":"(max-width: 880px) 100vw, 880px","src":"/static/8f474543488df8668d50ffbde7c51614/abd5f/Vim.jpg","srcSet":"/static/8f474543488df8668d50ffbde7c51614/abd5f/Vim.jpg 880w"}}},"author":{"id":"Jaeyoun","bio":"The maintainer","avatar":{"children":[{"fixed":{"src":"/static/345ae62c3650ceca4088b84d922b3bf4/4e842/JY-bold-big.png"}}]}}},"fields":{"layout":"post","slug":"/2020-01-21-My-Vim-command/"}},"next":null,"primaryTag":"Tools"}}}