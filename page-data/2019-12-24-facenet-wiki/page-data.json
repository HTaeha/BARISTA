{"componentChunkName":"component---src-templates-post-tsx","path":"/2019-12-24-facenet-wiki/","webpackCompilationHash":"b99ff2a73df5fb50b17f","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB6klEQVQ4y52Vuy9DcRTH7+0trUdLLCQMrKIzQcQjnfwHVoPEQMLssYhFDMQuqMai1Q5IhJjZWWyiHoP3QnKv79FzrtOruVf8kk9+t79zzvd3fq9Tw0BzHIcIgQrD02iMbLZtW+gJk8ct7k3ygd0NIKEaEANxsAR2QRpOSfaJsw8FJ8Ee2AGrPB4FYRGsBdWUJf/uAx9OsT2CLk9GFibacH7atlqNKR+doE4Z2sENBzyDbh6vVD4LSpRWVKX3aRqcyn5y3wEKHPACeng8wv24ErxC1m06wzE2ZANEe3l8SoldgkbZ6+9AqI8qh5xXFHYRvQYryvcCNMnh6iXTCaf9RMGdU9rOMVEz28Pa391s9FsBovfKPsLjUV5liWBMNhQGv0wT4EGuFHyHOOZXhhH9SgKWn1CZvkGsXy9bnFooQ/f5FGdNiSK+8/w89fJv2fwOBkpE8TEJlvWL4O+UyjRfZk+16KDOUC7pjJ8oMs35iL6CYTFMqExm/yEqV+pTBhto872idHpyYbm6BN5TqYV0yhScUUFzZWrjWsDpFwzvTedaJ22dsgWLyHaeevCkyltGTwifVj1DSIlmnb+3YyqyhkdZRC0u+fVgE5yAfXAIDrg/UtDYGeKp/EXRxw2VleGtGu5TCmgcT38T5hdMUxc6xWwpjQAAAABJRU5ErkJggg==","width":400,"height":414,"src":"/static/cbfd19b86b52612908ae88881f48d777/647de/JY-white-logo.png","srcSet":"/static/cbfd19b86b52612908ae88881f48d777/647de/JY-white-logo.png 1x,\n/static/cbfd19b86b52612908ae88881f48d777/59139/JY-white-logo.png 1.5x,\n/static/cbfd19b86b52612908ae88881f48d777/af144/JY-white-logo.png 2x"}}},"markdownRemark":{"html":"<p>facenet wiki의 예시를 따라해보았습니다.\n얼굴 인식 및 분류를 하기 위해서 facenet을 이용해보려고 합니다. 먼저 wiki에 있는 예시를 실행해보면서 코드를 이해하고 적용해볼 생각입니다.</p>\n<hr>\n<p><a href=\"https://github.com/davidsandberg/facenet/wiki/Validate-on-LFW\">https://github.com/davidsandberg/facenet/wiki/Validate-on-LFW</a></p>\n<h2>Prerequisite</h2>\n<p>먼저 python 환경이 필요합니다. Anaconda를 설치하셔도 좋습니다.\nGPU가 있는 머신이 필요합니다.</p>\n<h2>Clone</h2>\n<p>facenet 레파지토리를 클론하고 requirements들을 다운로드 받습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone https://github.com/davidsandberg/facenet.git\npip install -r requirements.txt</code></pre></div>\n<h2>PYTHONPATH</h2>\n<p>파이썬 패스를 설정해주어야 합니다. 아래에서 […] 은 facenet 디렉토리가 있는 경로를 적어주시면 됩니다. (ex. /home/siisee11/facenet/src)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export PYTHONPATH=[...]/facenet/src</code></pre></div>\n<h2>Download dataset</h2>\n<p><a href=\"http://vis-www.cs.umass.edu/lfw/lfw.tgz\">여기</a> 에서 데이터를 다운로드 받습니다. 예시에서는 ~/Downloads 에 lfw.tgz 파일을 다운로드 받았습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">~/Downloads$ wget http://vis-www.cs.umass.edu/lfw/lfw.tgz</code></pre></div>\n<p>~/datasets/lfw/raw 에 압축을 풀어줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd ~/datasets\nmkdir -p lfw/raw\ntar xvf ~/Downloads/lfw.tgz -C lfw/raw --strip-components=1</code></pre></div>\n<h2>Align lfw dataset</h2>\n<p>다음으로 mtcnn을 이용해서 face detection 및 alignment(이미지 프리프로세싱)를 진행합니다. 다음 스텝에서 160*160 이미지를 사용하기 때문에 이에 맞춰서 이미지를 맞춰서 ~/datasets/lfw/lfw<em>mtcnnpy</em>160 에 저장합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">for N in {1..4}; do \\\npython src/align/align_dataset_mtcnn.py \\\n~/datasets/lfw/raw \\\n~/datasets/lfw/lfw_mtcnnpy_160 \\\n--image_size 160 \\\n--margin 32 \\\n--random_order \\\n--gpu_memory_fraction 0.25 \\\n&amp; done</code></pre></div>\n<p>이 때, GPU out of memory가 발생한다면 fraction 값을 0.2정도로 낮춰주면 됩니다.\n또 다른 에러로,\n<code class=\"language-text\">allow_pickle=false</code>\n라는 에러가 뜰 때가 있는데, 이는 numpy 버전 때문인데, src/align/detect<em>face.py 에서 np.load를 찾아서\nnp.load(…, …, allow</em>pickle=True)\n마지막에 allow_pickle=True 를 적어주면 된다.</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"facenet wiki의 예시를 따라해보았습니다.\n얼굴 인식 및 분류를 하기 위해서 facenet을 이용해보려고 합니다. 먼저 wiki에 있는 예시를 실행해보면서 코드를 이해하고 적용해볼 생각입니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/davidsandberg/facenet/wiki/Validate-on-LFW"},"children":[{"type":"text","value":"https://github.com/davidsandberg/facenet/wiki/Validate-on-LFW"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Prerequisite"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"먼저 python 환경이 필요합니다. Anaconda를 설치하셔도 좋습니다.\nGPU가 있는 머신이 필요합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Clone"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"facenet 레파지토리를 클론하고 requirements들을 다운로드 받습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"git clone https://github.com/davidsandberg/facenet.git\npip install -r requirements.txt"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"PYTHONPATH"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"파이썬 패스를 설정해주어야 합니다. 아래에서 […] 은 facenet 디렉토리가 있는 경로를 적어주시면 됩니다. (ex. /home/siisee11/facenet/src)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"export PYTHONPATH=[...]/facenet/src"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Download dataset"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"http://vis-www.cs.umass.edu/lfw/lfw.tgz"},"children":[{"type":"text","value":"여기"}]},{"type":"text","value":" 에서 데이터를 다운로드 받습니다. 예시에서는 ~/Downloads 에 lfw.tgz 파일을 다운로드 받았습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"~/Downloads$ wget http://vis-www.cs.umass.edu/lfw/lfw.tgz"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"~/datasets/lfw/raw 에 압축을 풀어줍니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"cd ~/datasets\nmkdir -p lfw/raw\ntar xvf ~/Downloads/lfw.tgz -C lfw/raw --strip-components=1"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Align lfw dataset"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"다음으로 mtcnn을 이용해서 face detection 및 alignment(이미지 프리프로세싱)를 진행합니다. 다음 스텝에서 160*160 이미지를 사용하기 때문에 이에 맞춰서 이미지를 맞춰서 ~/datasets/lfw/lfw"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"mtcnnpy"}]},{"type":"text","value":"160 에 저장합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"for N in {1..4}; do \\\npython src/align/align_dataset_mtcnn.py \\\n~/datasets/lfw/raw \\\n~/datasets/lfw/lfw_mtcnnpy_160 \\\n--image_size 160 \\\n--margin 32 \\\n--random_order \\\n--gpu_memory_fraction 0.25 \\\n& done"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 때, GPU out of memory가 발생한다면 fraction 값을 0.2정도로 낮춰주면 됩니다.\n또 다른 에러로,\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"allow_pickle=false"}]},{"type":"text","value":"\n라는 에러가 뜰 때가 있는데, 이는 numpy 버전 때문인데, src/align/detect"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"face.py 에서 np.load를 찾아서\nnp.load(…, …, allow"}]},{"type":"text","value":"pickle=True)\n마지막에 allow_pickle=True 를 적어주면 된다."}]}],"data":{"quirksMode":false}},"excerpt":"facenet wiki의 예시를 따라해보았습니다.\n얼굴 인식 및 분류를 하기 위해서 facenet을 이용해보려고 합니다. 먼저 wiki에 있는 예시를 실행해보면서 코드를 이해하고 적용해볼 생각입니다. https://github.com…","timeToRead":1,"frontmatter":{"title":"Facenet WIKI 따라하기","userDate":"24 December 2019","date":"2019-12-24T10:03:47.149Z","tags":["machine learning"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHaoxY4gP/EABkQAAMBAQEAAAAAAAAAAAAAAAABAhESIf/aAAgBAQABBQJ17rE9HJyxSf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABUQAQEAAAAAAAAAAAAAAAAAACAh/9oACAEBAAY/Aov/xAAZEAEBAAMBAAAAAAAAAAAAAAABABEhUTH/2gAIAQEAAT8hbSHZjFn2M8bAb9v/2gAMAwEAAgADAAAAEFQP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAQADAAMBAAAAAAAAAAAAAREAITFBUYGR/9oACAEBAAE/ELWoHvvApPplSoPHKHatjzCTRvN/lw/LW2Of/9k=","aspectRatio":1.238293444328824,"src":"/static/931fde25b59cd1c4b49b4d2afc3be6a0/f5a10/brain.jpg","srcSet":"/static/931fde25b59cd1c4b49b4d2afc3be6a0/f8f18/brain.jpg 930w,\n/static/931fde25b59cd1c4b49b4d2afc3be6a0/f5a10/brain.jpg 1190w","sizes":"(max-width: 1190px) 100vw, 1190px"}}},"author":{"id":"Jaeyoun","bio":"The maintainer","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB4klEQVQ4y6WUu64BURSGBw2FiChcCxKER/AGnkCpcBKJRqNQeggNQqVwl0hUNIjQuDUkxCUeQIW4Huf8rGSMmaGxip291l7f3mv9s/cwf18Yw/N/H3a73T5E3sKsiWaLw0g9HA6n06nT6cRisW63i8hutzufz+12OxqNNhoNpMEVgRHdbDaYjMdji8XCMEy5XKal0WhkMBgQKZVK1MULTH6tVmu1Wpgsl0u73c7lEYerUCgGgwGXv8OXywVjMplUq9W0vFgsbDYbgEqlcjwe3W435uFwGK1xK7/D1+sVY7PZRIbJZEKdcGezmdlsVqlULpcL8VAoJFSR4Wqbz+clEolWq+33+1S/0+kE6fF46AxxGLbf7zEWCgVk63Q6qh886pfJZNiXrVEE3m631A/ywENhtn+r1YqIkH+qXSwW0+k0RbPZLPHD4RDufD4n/VAXX23aLB6Pcz9PJpOBazQaWZ7Or1arLP88eTqd0jLL41ZAP71eT/qvViuNRuP3+9nzXtRer9cOhwN8LpfDJ0UklUrBBU/993q9RCLB5j8Fo83A0+eRSqUY5XI5TZRKZb1eFxGMx08mE5/P9/MwTAKBQDAY9Hq9kUgE95+u46f3/O4N4qryH4bwJSPjKjDhpsw3v6F/G2DG6DAJ3zQAAAAASUVORK5CYII=","width":400,"height":400,"src":"/static/345ae62c3650ceca4088b84d922b3bf4/4e842/JY-bold-big.png","srcSet":"/static/345ae62c3650ceca4088b84d922b3bf4/4e842/JY-bold-big.png 1x,\n/static/345ae62c3650ceca4088b84d922b3bf4/fca9c/JY-bold-big.png 1.5x,\n/static/345ae62c3650ceca4088b84d922b3bf4/94286/JY-bold-big.png 2x"}}]}}}},"relatedPosts":{"totalCount":1,"edges":[{"node":{"id":"7b48d297-9a75-53c4-bfed-d82bf575cfa6","timeToRead":1,"excerpt":"facenet wiki의 예시를 따라해보았습니다.\n얼굴 인식 및 분류를 하기 위해서 facenet을 이용해보려고 합니다. 먼저 wiki에 있는 예시를 실행해보면서 코드를 이해하고 적용해볼 생각입니다. https://github.com…","frontmatter":{"title":"Facenet WIKI 따라하기"},"fields":{"slug":"/2019-12-24-facenet-wiki/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2019-12-24-facenet-wiki/","prev":{"excerpt":"linux ubuntu의 kernel configuration을 체크하는 방법 linux ubuntu의 kernel configuration을 체크하는 방법\n현재 자기가 쓰고 있는 리눅스 커널의 configuration…","timeToRead":1,"frontmatter":{"title":"Ubuntu CONFIG 확인하기","tags":["ubuntu"],"date":"2019-12-22T10:03:47.149Z","draft":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.5625,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABQUlEQVQoz81SyUoEMRDtb9Hu6Znp7nRSqeo9zoJ4EA/iCKK462U8yCC4IKOCy+DRf/BDtSbSjqA3DxpeQapSeby8iqN/sZy/vowWqt5gXaQ6pVkPCgWzy2ARa1wkyU0x4EeFuQJAZfcRTAkFYJ/kfgfJFh2OROsFVHx4Vvqj0s8QSguDaj2NOqTOS385iSvSEIvXrd7b0+bOAgYSHKZcScSwaG9n4cTMj4rmvXFPi+YgjSbGvTPeddV4NO5x3j7Kg4O0ddmXL4NON9UStMNqWcmt8cZV48G4J0VrXHk3lXdR+c/GZYqrssEUG1loG7yeFnNhzK9mpQ6H1Jrl7WbBEslh0TKkWORhPk27qHqkVlPBDWtptJcHCWrk9WkYWj9CQKmxbd2SgGwVC1PWNsEOwxQh4A+jonoY9G1IX0H/5Ye9A0Gqp8Rh8nKoAAAAAElFTkSuQmCC","sizes":"(max-width: 750px) 100vw, 750px","src":"/static/655b6a6cb9d7e1cc7b0596cc819cf5f2/5a67f/ubuntu-logo4.png","srcSet":"/static/655b6a6cb9d7e1cc7b0596cc819cf5f2/5a67f/ubuntu-logo4.png 750w"}}},"author":{"id":"Jaeyoun","bio":"The maintainer","avatar":{"children":[{"fixed":{"src":"/static/345ae62c3650ceca4088b84d922b3bf4/4e842/JY-bold-big.png"}}]}}},"fields":{"layout":"post","slug":"/2019-12-29-ubuntu-config/"}},"next":{"excerpt":"2017년도 카카오톡 코딩테스트 예선 문제인 4단 고음을 풀어보았다. 문제 링크 : 아이유 4단고음 1에서 시작해서 (*++) 를 적절히 조합해서 최종 숫자를 만드는 방법의 수를 구하는 문제이다.…","timeToRead":1,"frontmatter":{"title":"2017 Kakaotalk 예선 4단 고음","tags":["programmers"],"date":"2019-12-29T07:03:47.149Z","draft":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.4467592592592593,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGgAAAQUBAAAAAAAAAAAAAAAAAAECAwQFBv/EABUBAQEAAAAAAAAAAAAAAAAAAAID/9oADAMBAAIQAxAAAAGzmshc+jEHD//EABwQAAICAgMAAAAAAAAAAAAAAAECAxIEERMyM//aAAgBAQABBQIvTGmXSJ5yyEryGydP/8QAFxEBAAMAAAAAAAAAAAAAAAAAAQIQEf/aAAgBAwEBPwGJhX//xAAWEQEBAQAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8BXZ//xAAbEAADAAIDAAAAAAAAAAAAAAAAAQIScRFBYf/aAAgBAQAGPwLLwluuaZOjHpJDJ0f/xAAbEAADAAIDAAAAAAAAAAAAAAAAAREhMUGRof/aAAgBAQABPyGcm5g/cUeRegL18QKrdqHmH//aAAwDAQACAAMAAAAQmM//xAAXEQEBAQEAAAAAAAAAAAAAAAABAEGB/9oACAEDAQE/EDV25f/EABURAQEAAAAAAAAAAAAAAAAAABEQ/9oACAECAQE/EEM//8QAHhABAAMAAQUBAAAAAAAAAAAAAQARIUExUWGR0fH/2gAIAQEAAT8QALk8coBHt3sCAlwur+ZA6wjyQN9xCViwcrmu0pkV8if/2Q==","sizes":"(max-width: 1250px) 100vw, 1250px","src":"/static/028188f4c09504aba1062cb7202c7061/54dcf/IU.jpg","srcSet":"/static/028188f4c09504aba1062cb7202c7061/f8f18/IU.jpg 930w,\n/static/028188f4c09504aba1062cb7202c7061/54dcf/IU.jpg 1250w"}}},"author":{"id":"Jaeyoun","bio":"The maintainer","avatar":{"children":[{"fixed":{"src":"/static/345ae62c3650ceca4088b84d922b3bf4/4e842/JY-bold-big.png"}}]}}},"fields":{"layout":"post","slug":"/2019-12-29-2017-kakaotalk/"}},"primaryTag":"machine learning"}}}